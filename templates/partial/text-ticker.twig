{% set classname = classname|default('') %}
{% set attributes = attributes|default([]) %}
{% set tagname = tagname|default('h3') %}
{% set mode = mode|default('js') %}
{% set direction = direction|default(null) %}
{% set speed = speed|default(1) %}
{% set playInView = playInView ?? true %}
{% set inViewOffset = inViewOffset|default(-200) %}

{# make sure mode is valid #}
{% if mode not in ['css', 'js', 'scroll'] %}
  {% set mode = 'js' %}
{% endif %}

{# make sure direction is valid (both is only valid in SCROLL & JS mode) #}
{% if direction not in ['left', 'right', 'top', 'bottom', 'both'] %}
  {% set direction = mode == 'css' ? 'left' : 'both' %}
{% endif %}

{% if direction in ['top', 'bottom'] %}
  {% set classname = classname|split(' ')|merge(['flex-column', 'align-items-start'])|join(' ') %}
{% else %}
  {% set classname = classname|split(' ')|merge(['flex-row', 'align-items-center'])|join(' ') %}
{% endif %}

<div
  class="text-ticker d-flex flex-nowrap overflow-clip --direction-{{ direction }} {{ classname }}"
  {% if playInView %}
  data-scroll
  data-scroll-call="text-ticker"
  data-scroll-offset="{{ inViewOffset }}px,0"
  data-scroll-repeat="true"
  {% endif %}
  data-module="text-ticker"
  data-text-ticker="{{ mode }}"
  data-text-ticker-speed="{{ speed }}"
  {{ attributes|join(' ') }}
>
  <{{tagname}} 
    class="text-ticker__text m-0 p-0" 
    {% if aria_label != false %}aria-label="{{ aria_label|default(text) }}"{% endif %}
    style="--ticker-index: 0;"
  >{{ text }}</{{tagname}}>
</div>
